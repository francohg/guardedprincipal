<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Combustible</title>
    <link rel="shortcut icon" href="logo.png" />
    <link rel="stylesheet" href="./index.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
        integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
        crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        let id=0,combus=0,vel=0;
        google.charts.load('current', { 'packages': ['gauge'] });
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Label', 'Value'],
                ['Velocidad', 00],
                ['Combustible', 0],
            ]);

            var options = {
                width: 600, height: 240,
                redFrom: 90, redTo: 100,
                yellowFrom: 75, yellowTo: 90,
                minorTicks: 5
            };

            var chart = new google.visualization.Gauge(document.getElementById('chart_div'));

            chart.draw(data, options);

            setInterval(function () {
                data.setValue(0, 1, actualizave());
                chart.draw(data, options);
            }, 2000);
            setInterval(function () {
                data.setValue(1, 1, actualizacom());
                chart.draw(data, options);
            }, 2000);
            
        }
    </script>
</head>

<body>
    <nav class="navbar fixed-top bg-dark">
        <div class="container-fluid">
            <img src="./logo.png" alt="guarded tranport" style="width: 50px;" />
            <button style="background-color: red;" class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="offcanvas offcanvas-end" tabindex="-1" style="background-color: grey; color: white;"
                id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel">
                        Guarded Transport
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <li class="nav-item">
                            <a style="color: white;" class="nav-link active link" aria-current="page"
                                href="index1.html">Inicio</a>
                        </li>
                        <li class="nav-item">
                            <a style="color: white;" class="nav-link active link" aria-current="page"
                                href="camiones.html">Camiones</a>
                        </li>
                        <li class="nav-item">
                            <a style="color: white;" class="nav-link link" href="combustible.html">Combustible</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a style="color: white;" class="nav-link link" href="Rutas.html">Rutas</a>
                        </li>
                    </ul>
                    <li class="nav-item dropdown">
                        <a style="color: white;" class="nav-link link" href="Manual.pdf">Manual</a>
                      </li>
                      <li class="nav-item dropdown">
                        <a style="color: white;" class="nav-link link" href="index.html">Salir</a>
                      </li>
                    <form class="d-flex" role="search">
                        <input class="form-control me-2" type="search" placeholder="Buscar Camion"
                            aria-label="Search" />
                        <button style="background-color: white;" class="btn" type="submit">
                            Buscar
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </nav>


    <br />
    <br />
    <br />
    <br />
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <center>
                    <select name="rutas" id="pet-select">
                        <option value="">Escoge una camion</option>
                      </select>
                </center>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <center>
                    <div id="chart_div" style="background-color: white;"></div>
                </center>
            </div>
        </div>
        <br>
        <div class="row">
            <center><div id="card" class="col-lg-4 card">
                <h4>Combustible inicial del dia</h4>
                <h5 id="comini">Lts</h5>
                <h4>Ultimo combustible registrado</h4>
                <h5 id="comfin">Lts</h5>
                <h4>Combustible utilizado</h4>
                <h5 id="result">Lts</h5>
            </div>
        </center>
        </div>
    </div>
    <br />
    <br />

</body>

<footer class="page-footer font-small blue pt-4" style="background-color: black; color: white;">
    <!-- Footer Links -->
    <div class="container-fluid text-center text-md-left">
        <!-- Grid row -->
        <div class="row">
            <!-- Grid column -->
            <div class="col-md-6 mt-md-0 mt-3">
                <!-- Content -->
                <h5 class="text-uppercase">C. Jesse Salvador Sandoval Otamendi</h5>
                <p>Director de servicios municipales</p>
            </div>
            <!-- Grid column -->

            <hr class="clearfix w-100 d-md-none pb-3" />

            <!-- Grid column -->
            <div class="col-md-3 mb-md-0 mb-3">
                <!-- Links -->
                <h5 class="text-uppercase">Instagram</h5>

                <ul class="list-unstyled">
                    <li>
                        <a href="#!"><img src="./i12.png" id="i" style="width: 30px;" /></a>
                    </li>
                </ul>
            </div>
            <!-- Grid column -->

            <!-- Grid column -->
            <div class="col-md-3 mb-md-0 mb-3">
                <!-- Links -->
                <h5 class="text-uppercase">Facebook</h5>

                <ul class="list-unstyled">
                    <li>
                        <a href="#!"><img src="./i13.png" id="i" style="width: 30px;" /></a>
                    </li>
                </ul>
            </div>
            <!-- Grid column -->
        </div>
        <!-- Grid row -->
    </div>
    <!-- Footer Links -->

    <!-- Copyright -->
    <div class="footer-copyright text-center py-3" style="background-color: grey; color: white;">
        Â© 2022 Copyright: Hernandez Franco Gilberto y Garcia Martinez Brian Alfredo
    </div>
    <!-- Copyright -->
</footer>

</html>
<script src="jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function () {
    $.post("consultrutas.php", function (resp) {
      var a = resp.split("\n");
      const date = new Date();
      for (var i = 0; i < a.length - 1; i++) {
        var b = a[i].split("/*-");
        relleno="'"+b[0]+"'"
        var con = '<option value='+relleno+' onclick=" registra('+b[0]+')">Camion '+b[0]+'</option>';
        $('#pet-select').append(con);
      }
    });
  });
  let c2=0;
  function registra(idd) {
    id=idd;
    let parametros = {
      "id": id
    };
    $.post("consultastatus.php", parametros, function (resultado) {
      //alert("Operacion exitosa "+resultado);
      var a = resultado.split("$$$");
      a = a[1].split("///");
      //alert("combustible "+a[1])
    combus=a[1];
    $('#comfin').html(combus+"Lts");
    vel=a[0];
    });
    $.post("consultasta.php", parametros, function (resultado) {
      //alert("Operacion exitosa "+resultado);
      var a = resultado.split("$$$");
      a = a[1].split("///");
      //alert("combustible "+a[1])
    c2=a[1];
    $('#comini').html(c2+"Lts");
    });
    total=parseFloat(c2)-parseFloat(combus);
    console.log("total: "+c2);
    $('#result').html(total+"Lts");
  }
  function actualizave() {
    registra(id);
    return vel;
  }
  function actualizacom() {
    registra(id);
    return combus;
  }
</script>
