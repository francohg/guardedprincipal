<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <style>
        #map {
          height: 100%;
        }
        html, body {
          height: 100%;
          margin: 0;
          padding: 0;
        }
      </style>
</head>
<body>
    <div id="map"></div>
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5oP8S4r-3tx5tyKndm9ypKbfSrofvGfo&callback=initMap"></script>
    
    <script>
        const coords = { lat: 19.770797, lng: -98.571165 };
        const coords2 = { lat: 19.770665, lng: -98.571581 };
        const coords4 = { lat: 19.772133, lng: -98.573206 };
        const coords5 = { lat: 19.770508, lng: -98.572727 };
        const coords6 = { lat: 19.770081, lng: -98.573652 };
        const coords7 = { lat: 19.771638, lng: -98.574328 };
        const coords8 = { lat: 19.771758, lng: -98.574642 };
        const coords10 = { lat: 19.770157, lng: -98.574931 };
        const coords11 = { lat: 19.769459, lng: -98.575746 };
        const coords12 = { lat: 19.771037, lng: -98.576507 };
        const coords15 = { lat: 19.770476, lng: -98.579261 };
        const mapDiv = document.getElementById("map");
        let map;
        let marker;

        function initMap(){
            let n = 0;
            let m = 1;
            let arreglo = [coords,coords2,coords4,coords5,coords6,coords7,coords8,coords10,coords11,coords12,coords15];
            map = new google.maps.Map(mapDiv, {
            center: coords,
            zoom: 8,
            });

            function recorrido(){
                if (n<arreglo.length) {
                  
                  var objConfigDr ={
                    map: map
                  }
                  var objConfigDs ={
                    origin: arreglo[n],
                    destination: arreglo[m],
                    travelMode: google.maps.TravelMode.DRIVING
                  }
                  var ds = new google.maps.DirectionsService();
                  var dr = new google.maps.DirectionsRenderer(objConfigDr);

                  ds.route(objConfigDs,fnRutear);
                  function fnRutear(resultados,status){
                    if (status == 'OK') {
                      dr.setDirections(resultados); 
                    }else{
                      alert('Error'+status);
                    }
                  }
                  n = n + 1;
                  m = m + 1;
                  recorrido();
                }
            }
            
            recorrido();
        }
        window.initMap = initMap;
    </script>
</body>
</html>
